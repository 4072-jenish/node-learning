<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexShop | Dark E-Commerce</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --bg-dark: #121212;
            --bg-card: #1e1e1e;
            --bg-card-hover: #252525;
            --primary: #8a2be2;
            --primary-hover: #9b45f0;
            --text-primary: #f0f0f0;
            --text-secondary: #a0a0a0;
            --accent: #00bcd4;
            --success: #4caf50;
            --danger: #f44336;
            --warning: #ff9800;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            padding-bottom: 2rem;
        }

        /* Header Styles */
        header {
            background-color: rgba(30, 30, 30, 0.95);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .search-bar {
            flex: 1;
            max-width: 500px;
            margin: 0 2rem;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 0.8rem 1rem 0.8rem 3rem;
            border-radius: 50px;
            border: none;
            background-color: #2a2a2a;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .search-bar i {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        .nav-icons {
            display: flex;
            gap: 1.5rem;
            font-size: 1.3rem;
        }

        .nav-icons a {
            color: var(--text-primary);
            text-decoration: none;
            position: relative;
            transition: color 0.3s;
        }

        .nav-icons a:hover {
            color: var(--primary);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--primary);
            color: white;
            font-size: 0.7rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Carousel Styles */
        .carousel {
            margin: 1.5rem auto;
            max-width: 1200px;
            height: 300px;
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .carousel-inner {
            width: 100%;
            height: 100%;
            display: flex;
            transition: transform 0.5s ease;
        }

        .carousel-item {
            min-width: 100%;
            height: 100%;
            position: relative;
        }

        .carousel-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .carousel-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            padding: 1.5rem;
            color: white;
        }

        .carousel-caption h3 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .carousel-caption p {
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .carousel-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .carousel-btn:hover {
            background-color: var(--primary-hover);
        }

        .carousel-controls {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            transform: translateY(-50%);
            padding: 0 1rem;
            z-index: 10;
        }

        .carousel-control {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .carousel-control:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        .carousel-indicators {
            position: absolute;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 0.5rem;
            z-index: 10;
        }

        .carousel-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .carousel-indicator.active {
            background-color: var(--primary);
        }

        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        /* Filter Section */
        .filters {
            background-color: var(--bg-card);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: center;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-group label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .filter-group select, .filter-group input {
            padding: 0.7rem;
            border-radius: 6px;
            border: 1px solid #333;
            background-color: #2a2a2a;
            color: var(--text-primary);
        }

        .filter-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.7rem 1.2rem;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .filter-btn:hover {
            background-color: var(--primary-hover);
        }

        /* Products Grid */
        .products-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .products-header h2 {
            font-size: 1.5rem;
        }

        .sort-select {
            padding: 0.5rem;
            border-radius: 6px;
            border: 1px solid #333;
            background-color: #2a2a2a;
            color: var(--text-primary);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .product-card {
            background-color: var(--bg-card);
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            flex-direction: column;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            background-color: var(--bg-card-hover);
        }

        .product-image {
            width: 100%;
            height: 220px;    
            background-color: #2a2a2a;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border-bottom: 1px solid #333;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;   
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        .product-info {
            padding: 1.2rem;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .product-title {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .product-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            flex-grow: 1;
        }

        .product-price {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .product-rating {
            color: var(--warning);
            margin-bottom: 1rem;
        }

        .product-actions {
            display: flex;
            gap: 0.5rem;
        }

        .add-to-cart {
            flex: 1;
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.7rem;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .add-to-cart:hover {
            background-color: var(--primary-hover);
        }

        .wishlist-btn {
            background-color: #2a2a2a;
            color: var(--text-primary);
            border: none;
            width: 40px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .wishlist-btn:hover {
            background-color: #333;
            color: var(--danger);
        }

        /* Cart Preview */
        .cart-preview {
            position: fixed;
            top: 0;
            right: -350px;
            width: 350px;
            height: 100vh;
            background-color: var(--bg-card);
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.2);
            transition: right 0.3s ease-in-out;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }

        .cart-preview.open {
            right: 0;
        }

        .cart-header {
            padding: 1.5rem;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close-cart {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        .cart-item {
            display: flex;
            gap: 1rem;
            padding: 1rem 0;
            border-bottom: 1px solid #333;
        }

        .cart-item-image {
            width: 70px;
            height: 70px;
            object-fit: cover;
            border-radius: 8px;
            background-color: #2a2a2a;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 500;
            margin-bottom: 0.3rem;
        }

        .cart-item-price {
            color: var(--primary);
            font-weight: 600;
        }

        .cart-item-actions {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .quantity-btn {
            background-color: #2a2a2a;
            color: var(--text-primary);
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 4px;
            cursor: pointer;
        }

        .cart-item-quantity {
            margin: 0 0.5rem;
        }

        .remove-item {
            color: var(--danger);
            background: none;
            border: none;
            cursor: pointer;
            margin-left: auto;
        }

        .cart-footer {
            padding: 1.5rem;
            border-top: 1px solid #333;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }

        .checkout-btn {
            width: 100%;
            padding: 1rem;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .checkout-btn:hover {
            background-color: var(--primary-hover);
        }

        .product-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 0.8rem;
}

/* Add to Cart button */
.add-to-cart {
    flex: 1;
    background-color: var(--primary);
    color: #fff;
    padding: 0.6rem 0;
    border-radius: 6px;
    text-align: center;
    font-weight: 600;
    transition: background 0.3s ease;
    font-size: 0.95rem;
    text-decoration: none;
}

.add-to-cart:hover {
    background-color: var(--primary-hover);
}

/* View More link styled as button */
.view-more {
    flex: 1;
    background-color: #555;
    color: #fff;
    padding: 0.6rem 0;
    border-radius: 6px;
    text-align: center;
    font-weight: 600;
    transition: background 0.3s ease;
    font-size: 0.95rem;
    text-decoration: none;
}

.view-more:hover {
    background-color: #777;
}

/* Wishlist Heart */
.wishlist-btn {
    width: 40px;
    height: 40px;
    background-color: #2a2a2a;
    border: none;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: 0.3s ease;
}

.wishlist-btn i {
    font-size: 1.1rem;
    color: var(--text-primary);
}

.wishlist-btn:hover {
    background-color: #333;
    color: var(--danger);
}

        /* Responsive Design */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                padding: 1rem;
            }
            
            .search-bar {
                margin: 1rem 0;
                max-width: 100%;
            }
            
            .carousel {
                height: 200px;
            }
            
            .carousel-caption h3 {
                font-size: 1.2rem;
            }
            
            .carousel-caption p {
                font-size: 0.9rem;
            }
            
            .filters {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-group {
                width: 100%;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }

        }
        .view-more-btn {
flex: 1;
background-color: #555;
color: white;
border: none;
padding: 0.7rem;
border-radius: 6px;
cursor: pointer;
text-align: center;
text-decoration: none;
display: inline-block;
transition: background-color 0.3s;
}
.view-more-btn:hover {
background-color: #777;
}
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">
            <i class="fas fa-store"></i>
            <span>NexShop</span>
        </div>
        <div class="search-bar">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Search for products..." id="searchInput">
        </div>
        <div class="nav-icons">
            <a href="/web/webLogin"><i class="fas fa-user"></i></a>
            <a href="#"><i class="fas fa-heart"></i></a>
            <a href="/web/cart/" id="cartIcon">
                <i class="fas fa-shopping-cart"></i>
            </a>
        </div>
    </header>

    <!-- Carousel -->
    <div class="carousel">
        <div class="carousel-inner" id="carouselInner">
            <div class="carousel-item">
                <img src="https://images.unsplash.com/photo-1607082350899-7e105aa886ae?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" alt="Summer Sale">
                <div class="carousel-caption">
                    <h3>Summer Sale</h3>
                    <p>Up to 50% off on selected items</p>
                    <button class="carousel-btn">Shop Now</button>
                </div>
            </div>
            <div class="carousel-item">
                <img src="https://images.unsplash.com/photo-1555529771-7888783a18d3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2069&q=80" alt="New Arrivals">
                <div class="carousel-caption">
                    <h3>New Arrivals</h3>
                    <p>Check out our latest products</p>
                    <button class="carousel-btn">Discover</button>
                </div>
            </div>
            <div class="carousel-item">
                <img src="https://images.unsplash.com/photo-1608506375591-b91b98fe3185?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" alt="Free Shipping">
                <div class="carousel-caption">
                    <h3>Free Shipping</h3>
                    <p>On all orders over ₹999</p>
                    <button class="carousel-btn">Learn More</button>
                </div>
            </div>
        </div>
        <div class="carousel-controls">
            <button class="carousel-control" id="prevBtn">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="carousel-control" id="nextBtn">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        <div class="carousel-indicators" id="carouselIndicators">
            <button class="carousel-indicator active"></button>
            <button class="carousel-indicator"></button>
            <button class="carousel-indicator"></button>
        </div>
    </div>

    <!-- Main -->
    <div class="container">
        <!-- Filters -->
        <div class="filters">
           <div class="filter-group">
    <label for="categoryFilter">Category</label>
    <select id="categoryFilter">
        <option value="all">All Categories</option>
        <% category.forEach(cat => { %>
            <option value="<%= cat._id %>"><%= cat.name %></option>
        <% }) %>
    </select>
</div>
            <div class="filter-group">
                <label for="priceFilter">Price Range</label>
                <select id="priceFilter">
                    <option value="all">All Prices</option>
                    <option value="0-25">Under ₹25</option>
                    <option value="25-50">₹25 to ₹50</option>
                    <option value="50-100">₹50 to ₹100</option>
                    <option value="100+">Over ₹100</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="ratingFilter">Minimum Rating</label>
                <select id="ratingFilter">
                    <option value="0">Any Rating</option>
                    <option value="4">4 Stars & Up</option>
                    <option value="3">3 Stars & Up</option>
                </select>
            </div>
            <button class="filter-btn" id="applyFilters">Apply Filters</button>
        </div>

      <div class="products-grid" id="productsGrid">
  <% product.forEach(product => { %>
    <div class="product-card" data-id="<%= product._id %>" data-name="<%= product.name %>"
         data-price="<%= product.price %>" data-category="<%= product.category %>"
         data-rating="<%= product.rating %>">

      <div class="product-image">
        <img src="<%= product.image %>" alt="<%= product.name %>" />
      </div>

      <div class="product-info">
        <h3 class="product-title"><%= product.name %></h3>

        <p class="product-description">
          <%= product.description && product.description.length > 120
              ? product.description.substring(0, 120) + '...'
              : product.description %>
        </p>

        <div class="product-price">₹<%= product.price.toFixed(2) %></div>

        <div class="product-rating">
          <% for(let i=1; i <=5; i++){ %>
            <% if(i <= Math.floor(product.rating)){ %>
              <i class="fas fa-star"></i>
            <% } else if(i - 0.5 <= product.rating){ %>
              <i class="fas fa-star-half-alt"></i>
            <% } else { %>
              <i class="far fa-star"></i>
            <% } %>
          <% } %>
          <span>(<%= product.rating %>)</span>
        </div>

        <div class="product-actions">
          <a href="/web/cart/add/<%= product._id %>" class="btn add-to-cart">Add to Cart</a>
          <a href="/web/<%= product._id %>" class="btn view-more">View More</a>
          <button class="wishlist-btn"><i class="far fa-heart"></i></button>
        </div>
      </div>

    </div>
  <% }) %>
</div>

    </div>

    <!-- Cart Preview --> 
  <div class="cart-preview" id="cartPreview">
    <div class="cart-header">
      <h3>Your Cart</h3>
      <button class="close-cart" id="closeCart">&times;</button>
    </div>
    <div class="cart-items" id="cartItems"></div>
    <div class="cart-footer">
      <div class="cart-total">
        <span>Total:</span>
        <span id="cartTotal">₹0.00</span>
      </div>
      <button class="checkout-btn">Proceed to Checkout</button>
    </div>
  </div>

    <script>
    // ================= Carousel =================
    const carouselInner = document.getElementById("carouselInner");
    const carouselItems = document.querySelectorAll(".carousel-item");
    const indicators = document.querySelectorAll(".carousel-indicator");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    let currentIndex = 0;
    const totalItems = carouselItems.length;

    function updateCarousel() {
      carouselInner.style.transform = `translateX(-${currentIndex * 100}%)`;
      indicators.forEach((indicator, index) => {
        indicator.classList.toggle("active", index === currentIndex);
      });
    }
    function nextSlide() {
      currentIndex = (currentIndex + 1) % totalItems;
      updateCarousel();
    }
    function prevSlide() {
      currentIndex = (currentIndex - 1 + totalItems) % totalItems;
      updateCarousel();
    }
    nextBtn.addEventListener("click", nextSlide);
    prevBtn.addEventListener("click", prevSlide);
    indicators.forEach((ind, i) =>
      ind.addEventListener("click", () => {
        currentIndex = i;
        updateCarousel();
      })
    );
    setInterval(nextSlide, 5000);

    // ================= Filters =================
    const searchInput = document.getElementById("searchInput");
    const categoryFilter = document.getElementById("categoryFilter");
    const priceFilter = document.getElementById("priceFilter");
    const ratingFilter = document.getElementById("ratingFilter");
    const applyFilters = document.getElementById("applyFilters");
    const productsGrid = document.getElementById("productsGrid");
    const productCards = productsGrid.querySelectorAll(".product-card");

    function applyProductFilters() {
      const searchValue = searchInput.value.toLowerCase();
      const categoryValue = categoryFilter.value;
      const priceValue = priceFilter.value;
      const ratingValue = parseFloat(ratingFilter.value);

      productCards.forEach(card => {
        const name = card.dataset.name;
        const category = card.dataset.category;
        const price = parseFloat(card.dataset.price);
        const rating = parseFloat(card.dataset.rating);

        let show = true;

        // search filter
        if (searchValue && !name.includes(searchValue)) {
          show = false;
        }
        // category filter
        if (categoryValue !== "all" && category !== categoryValue) {
          show = false;
        }
        // price filter
        if (priceValue !== "all") {
          if (priceValue === "0-25" && !(price < 25)) show = false;
          if (priceValue === "25-50" && !(price >= 25 && price <= 50)) show = false;
          if (priceValue === "50-100" && !(price >= 50 && price <= 100)) show = false;
          if (priceValue === "100+" && !(price > 100)) show = false;
        }
        // rating filter
        if (rating < ratingValue) {
          show = false;
        }

        card.style.display = show ? "flex" : "none";
      });
    }

    applyFilters.addEventListener("click", applyProductFilters);
    searchInput.addEventListener("input", applyProductFilters);
  </script>
</body>
</html>